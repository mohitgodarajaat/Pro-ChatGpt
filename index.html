<!DOCTYPE html>
<html lang="en" class="h-full">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CHAT-GPT PRO — Elite</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.11.174/pdf.min.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <style>
        body { height: 100dvh; overflow: hidden; font-family: 'Plus Jakarta Sans', sans-serif; background: #09090b; color: #fafafa; }
        .sidebar { background: #0c0c0e; border-right: 1px solid #1f1f22; }
        .glass-card { background: linear-gradient(135deg, rgba(16, 163, 127, 0.1) 0%, rgba(16, 163, 127, 0) 100%); border: 1px solid rgba(16, 163, 127, 0.3); border-radius: 16px; position: relative; overflow: hidden; }
        .glass-card::before { content: ''; position: absolute; top: 0; left: -100%; width: 100%; height: 100%; background: linear-gradient(90deg, transparent, rgba(255,255,255,0.05), transparent); transition: 0.5s; }
        .glass-card:hover::before { left: 100%; }
        .msg-user { background: #10a37f; color: white; border-radius: 20px 20px 4px 20px; padding: 14px 18px; align-self: flex-end; max-width: 85%; margin-left: auto; box-shadow: 0 4px 15px rgba(16, 163, 127, 0.2); }
        .msg-ai { background: #18181b; border: 1px solid #27272a; border-radius: 20px 20px 20px 4px; padding: 14px 18px; align-self: flex-start; max-width: 85%; }
        .pdf-btn { background: #e11d48; color: white; padding: 8px 16px; border-radius: 8px; font-weight: bold; margin-top: 10px; display: inline-flex; align-items: center; gap: 8px; cursor: pointer; transition: 0.2s; }
        .pdf-btn:hover { background: #be123c; transform: translateY(-2px); }
        #chat-scroller::-webkit-scrollbar { width: 5px; }
        #chat-scroller::-webkit-scrollbar-thumb { background: #27272a; border-radius: 10px; }
        .history-item { transition: 0.2s; cursor: pointer; border-radius: 8px; margin-bottom: 5px; padding: 8px; font-size: 13px; color: #a1a1aa; display: flex; justify-content: space-between; align-items: center; }
        .history-item:hover { background: #18181b; color: #fff; }
        .active-chat { background: #10a37f22; color: #10a37f; border: 1px solid #10a37f44; }
        .typing-dots { display: flex; gap: 4px; padding: 10px; }
        .dot { width: 6px; height: 6px; background: #10a37f; border-radius: 50%; animation: bounce 1.4s infinite; }
        @keyframes bounce { 0%, 80%, 100% { transform: translateY(0); } 40% { transform: translateY(-6px); } }
    </style>
</head>
<body class="dark overflow-hidden flex h-full">

    <aside id="sidebar" class="sidebar fixed inset-y-0 left-0 w-72 md:relative md:translate-x-0 -translate-x-full flex flex-col transition-transform duration-500">
        <div class="p-6 flex-1 flex flex-col overflow-hidden">
            <div class="flex items-center gap-3 mb-10">
                <div class="w-10 h-10 bg-[#10a37f] rounded-xl flex items-center justify-center font-bold text-white shadow-lg shadow-[#10a37f]/30 text-xl">G</div>
                <span class="font-bold text-xl tracking-tight">GPT-PRO <span class="text-[10px] bg-zinc-800 px-2 py-0.5 rounded text-zinc-400">v3.0</span></span>
            </div>

            <button onclick="startNewSession()" class="w-full py-3.5 bg-white text-black rounded-2xl font-bold hover:shadow-white/10 hover:shadow-xl transition-all mb-8 active:scale-95">+ New Session</button>
            
            <p class="text-[10px] font-bold text-zinc-600 uppercase tracking-[0.2em] px-2 mb-4">Chat History</p>
            <div id="history-container" class="flex-1 overflow-y-auto pr-2">
                </div>

            <div class="space-y-4 mt-4">
                <p class="text-[10px] font-bold text-zinc-600 uppercase tracking-[0.2em] px-2">Official Channel</p>
                <a href="https://t.me/AIwithMLbot" target="_blank" class="glass-card p-4 block group no-underline">
                    <div class="flex items-center gap-3">
                        <div class="w-8 h-8 rounded-full bg-[#0088cc]/20 flex items-center justify-center text-[#0088cc]">
                            <svg width="18" height="18" fill="currentColor" viewBox="0 0 24 24"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm4.64 6.8c-.15 1.58-.8 5.42-1.13 7.19-.14.75-.42 1-.68 1.03-.58.05-1.02-.38-1.58-.75-.88-.58-1.38-.94-2.23-1.5-.99-.65-.35-1.01.22-1.59.15-.15 2.71-2.48 2.76-2.69a.2.2 0 00-.05-.18c-.06-.05-.14-.03-.21-.02-.09.02-1.49.95-4.22 2.79-.4.27-.76.41-1.08.4-.36-.01-1.04-.2-1.55-.37-.63-.2-1.12-.31-1.08-.66.02-.18.27-.36.74-.55 2.92-1.27 4.86-2.11 5.83-2.51 2.78-1.16 3.35-1.36 3.73-1.36.08 0 .27.02.39.12.1.08.13.19.14.27-.01.06.01.24 0 .24z"/></svg>
                        </div>
                        <div>
                            <p class="text-sm font-bold text-white group-hover:text-[#10a37f] transition-colors">Telegram Bot</p>
                            <p class="text-[10px] text-zinc-500">Join our community</p>
                        </div>
                    </div>
                </a>
            </div>
        </div>
        <div class="p-6 text-[10px] text-zinc-700 font-medium tracking-widest text-center">AI POWERED BY GITHUB INFERENCE</div>
    </aside>

    <main class="flex-1 flex flex-col relative w-full overflow-hidden">
        <div id="chat-scroller" class="flex-1 overflow-y-auto p-4 md:p-12 flex flex-col gap-8">
            <div id="welcome" class="my-auto text-center animate-in fade-in zoom-in duration-1000">
                <h1 class="text-4xl font-bold mb-4 tracking-tighter">What can I <span class="text-[#10a37f]">create</span> today?</h1>
                <p class="text-zinc-500 text-sm max-w-md mx-auto">Upload images, read PDFs, or generate documents instantly with CHAT-GPT PRO.</p>
            </div>
        </div>

        <div class="p-4 md:pb-12 md:px-12 bg-gradient-to-t from-[#09090b] via-[#09090b] to-transparent">
            <div id="preview-area" class="max-w-4xl mx-auto mb-2 flex gap-2"></div>
            <div class="max-w-4xl mx-auto bg-[#131316] border border-zinc-800 rounded-[24px] p-2 shadow-2xl focus-within:border-[#10a37f]/40 transition-all">
                <div class="flex items-end gap-2">
                    <input type="file" id="fileIn" class="hidden" multiple accept="image/*,.pdf" onchange="handleFiles(event)">
                    <button onclick="document.getElementById('fileIn').click()" class="p-3 text-zinc-500 hover:text-white transition-colors">
                        <svg width="24" height="24" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><path d="M21.44 11.05l-9.19 9.19a6 6 0 01-8.49-8.49l9.19-9.19a4 4 0 015.66 5.66l-9.2 9.19a2.001 2.001 0 11-2.83-2.83l8.49-8.48"/></svg>
                    </button>
                    <textarea id="chatInput" rows="1" class="flex-1 bg-transparent border-none outline-none text-white p-3 resize-none max-h-40 text-[15px]" placeholder="Type or upload files..." onkeydown="if(event.key==='Enter'&&!event.shiftKey){event.preventDefault();send();}"></textarea>
                    <button onclick="send()" class="p-3.5 bg-[#10a37f] text-white rounded-[18px] hover:bg-[#0d8a6a] transition-all shadow-lg active:scale-90">
                        <svg width="20" height="20" fill="none" stroke="currentColor" stroke-width="3" viewBox="0 0 24 24"><path d="M22 2L11 13M22 2l-7 20-4-9-9-4 20-7z"/></svg>
                    </button>
                </div>
            </div>
        </div>
    </main>

    <script>
        const _k = ["github_pat_11BT7VRMI0LBWJ", "xUbOGGzx_j7QPRAjmoOcAYj0VlgL", "Nffw6V1g9cKrNe4LWRdda7jBYOLNPXXVHxVdlgP1"].join('');
        let currentChatId = null;
        let allChats = JSON.parse(localStorage.getItem('elite_history_v1') || '{}');
        let attachedFiles = [];

        function renderHistory() {
            const container = document.getElementById('history-container');
            container.innerHTML = '';
            Object.keys(allChats).reverse().forEach(id => {
                const item = document.createElement('div');
                item.className = `history-item ${id === currentChatId ? 'active-chat' : ''}`;
                const title = allChats[id].msgs[0]?.content.substring(0, 20) || "New Chat";
                item.innerHTML = `
                    <span onclick="loadChat('${id}')" class="truncate flex-1">${title}...</span>
                    <button onclick="deleteChat('${id}')" class="ml-2 hover:text-red-500">×</button>
                `;
                container.appendChild(item);
            });
        }

        function loadChat(id) {
            currentChatId = id;
            const scroller = document.getElementById('chat-scroller');
            scroller.innerHTML = '';
            document.getElementById('welcome')?.remove();
            
            allChats[id].msgs.forEach(m => {
                appendMsg(m.role, m.content, false);
            });
            renderHistory();
        }

        function deleteChat(id) {
            if(confirm("Delete this chat?")) {
                delete allChats[id];
                if(currentChatId === id) {
                    currentChatId = null;
                    location.reload();
                }
                saveHistory();
                renderHistory();
            }
        }

        function startNewSession() {
            currentChatId = 'chat_' + Date.now();
            allChats[currentChatId] = { msgs: [] };
            location.reload();
        }

        function saveHistory() {
            localStorage.setItem('elite_history_v1', JSON.stringify(allChats));
        }

        async function handleFiles(e) {
            const files = Array.from(e.target.files);
            const preview = document.getElementById('preview-area');
            for (let f of files) {
                const reader = new FileReader();
                reader.onload = (ev) => {
                    const isImg = f.type.startsWith('image/');
                    attachedFiles.push({ name: f.name, type: isImg ? 'img' : 'pdf', data: ev.target.result });
                    const div = document.createElement('div');
                    div.className = "w-12 h-12 rounded-lg bg-zinc-800 border border-zinc-700 overflow-hidden text-[8px] flex items-center justify-center text-center p-1 relative";
                    div.innerHTML = isImg ? `<img src="${ev.target.result}" class="object-cover w-full h-full">` : `PDF: ${f.name}`;
                    preview.appendChild(div);
                };
                reader.readAsDataURL(f);
            }
        }

        function createPDF(text) {
            const { jsPDF } = window.jspdf;
            const doc = new jsPDF();
            const lines = doc.splitTextToSize(text, 180);
            doc.text(lines, 10, 10);
            doc.save("CHATGPT-PRO-Document.pdf");
        }

        async function send() {
            const input = document.getElementById('chatInput');
            const txt = input.value.trim();
            if (!txt && !attachedFiles.length) return;
            if (!currentChatId) {
                currentChatId = 'chat_' + Date.now();
                allChats[currentChatId] = { msgs: [] };
            }

            document.getElementById('welcome')?.remove();
            document.getElementById('preview-area').innerHTML = '';

            const userContent = txt + (attachedFiles.length ? ` [Attached ${attachedFiles.length} files]` : '');
            appendMsg('user', userContent);
            allChats[currentChatId].msgs.push({role: 'user', content: userContent});
            input.value = '';

            let messageContent = [{ type: "text", text: txt || "Analyze these files" }];
            attachedFiles.forEach(f => {
                if(f.type === 'img') messageContent.push({ type: "image_url", image_url: { url: f.data } });
            });
            attachedFiles = [];

            const aiDiv = appendMsg('assistant', '<div class="typing-dots"><div class="dot"></div><div class="dot"></div><div class="dot"></div></div>');
            
            try {
                const r = await fetch("https://models.inference.ai.azure.com/chat/completions", {
                    method: "POST",
                    headers: { "Authorization": `Bearer ${_k}`, "Content-Type": "application/json" },
                    body: JSON.stringify({ model: "gpt-4o", messages: allChats[currentChatId].msgs })
                });
                const d = await r.json();
                const reply = d.choices[0].message.content;
                aiDiv.innerHTML = marked.parse(reply);
                
                if(reply.length > 200 || txt.toLowerCase().includes('pdf')) {
                    const btn = document.createElement('button');
                    btn.className = "pdf-btn";
                    btn.innerHTML = `<span>Download as PDF</span>`;
                    btn.onclick = () => createPDF(reply.replace(/[#*`]/g, ''));
                    aiDiv.appendChild(btn);
                }
                allChats[currentChatId].msgs.push({role: 'assistant', content: reply});
                saveHistory();
                renderHistory();
            } catch (e) { aiDiv.innerText = "Error connecting to server."; }
        }

        function appendMsg(role, content, isHtml = true) {
            const scroller = document.getElementById('chat-scroller');
            const d = document.createElement('div');
            d.className = role === 'user' ? 'msg-user' : 'msg-ai prose prose-invert';
            if (role === 'assistant' && isHtml) {
                d.innerHTML = marked.parse(content);
            } else if (role === 'assistant' && !isHtml) {
                d.innerHTML = marked.parse(content);
            } else {
                d.innerText = content;
            }
            scroller.appendChild(d);
            scroller.scrollTop = scroller.scrollHeight;
            return d;
        }

        window.onload = renderHistory;
    </script>
</body>
</html>
